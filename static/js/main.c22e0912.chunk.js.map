{"version":3,"sources":["App.module.scss","hooks/useStorage.ts","hooks/useKeyboardControls.ts","components/player/PointerControls.tsx","components/player/Player.tsx","hooks/useTextureMap.ts","resources/textures/terrain/grass-top.png","resources/textures/terrain/grass-side.png","resources/textures/terrain/stone.png","components/terrain/Block.tsx","components/terrain/Terrain.tsx","App.tsx","index.tsx"],"names":["module","exports","useStorage","create","set","texture","setTexture","state","keyHandler","key","extend","PointerLockControls","PointerControls","props","useThree","camera","gl","controls","useRef","useEffect","document","addEventListener","console","log","ref","args","domElement","Player","position","setPosition","useState","moveForward","moveBackward","moveLeft","moveRight","jump","movement","setMovement","handleKeyDown","e","code","handleKeyUp","removeEventListener","useKeyboardControls","useFrame","copy","Vector3","frontVector","sideVector","subVectors","normalize","multiplyScalar","applyEuler","rotation","TEXTURE_MAP","1","name","2","Block","id","TextureLoader","load","getTexture","magFilter","NearestFilter","receiveShadow","attach","color","map","Terrain","blocklist","blockX","blockZ","push","Math","random","App","playerPos","setPlayerPos","devEnabled","styles","dev","app","colorManagement","Sky","sunPosition","castShadow","intensity","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c22e0912.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"App_root__2Cy1g\",\"app\":\"App_app__3Slbh\"};","import { nanoid } from \"nanoid\";\r\nimport create from \"zustand\";\r\n\r\nconst getLocalStorage = (key: string) => {\r\n    const item = window.localStorage.getItem(key);\r\n    if (item !== null) {\r\n        return JSON.parse(item);\r\n    }\r\n};\r\nconst setLocalStorage = (key: string, value: string) => {\r\n    window.localStorage.setItem(key, JSON.stringify(value));\r\n}\r\n\r\nexport const useStorage = create((set) => ({\r\n    texture: 'dirt',\r\n    setTexture: (texture: string) => {\r\n      set((state) => ({\r\n        texture,\r\n      }));\r\n    }\r\n  }));","import { useEffect, useState } from \"react\";\r\nimport { useStorage } from \"./useStorage\";\r\n\r\ntype KeyProp = {\r\n    [key: string]: string\r\n}\r\n\r\nconst keyHandler = (key: string) => {\r\n    const keys: KeyProp = {\r\n        \"KeyW\": \"moveForward\",\r\n        \"KeyS\": \"moveBackward\",\r\n        \"KeyA\": \"moveLeft\",\r\n        \"KeyD\": \"moveRight\",\r\n        \"Space\": \"jump\"\r\n    };\r\n    return keys[key];\r\n}\r\n\r\nexport const useKeyboardControls = () => {\r\n    const [movement, setMovement] = useState({\r\n        moveForward: false,\r\n        moveBackward: false,\r\n        moveLeft: false,\r\n        moveRight: false,\r\n        jump: false,\r\n    });\r\n    const [setTexture] = useStorage((state) => [state.setTexture]);\r\n\r\n    useEffect(() => {\r\n        const handleKeyDown = (e: { code: string}) => {\r\n            if (keyHandler(e.code)) {\r\n            setMovement((state) => ({\r\n                ...state,\r\n                [keyHandler(e.code)]: true,\r\n            }));\r\n            }\r\n        };\r\n\r\n        const handleKeyUp = (e: { code: string}) => {\r\n            if (keyHandler(e.code)) {\r\n            setMovement((state) => ({\r\n                ...state,\r\n                [keyHandler(e.code)]: false,\r\n            }));\r\n            }\r\n        };\r\n\r\n        document.addEventListener('keydown', handleKeyDown);\r\n        document.addEventListener('keyup', handleKeyUp);\r\n\r\n        return () => {\r\n            document.removeEventListener('keydown', handleKeyDown);\r\n            document.removeEventListener('keyup', handleKeyUp);\r\n        };\r\n    }, [setTexture]);\r\n\r\n    return movement;\r\n  };","import { PointerLockControls } from \"@react-three/drei\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { useThree, extend } from \"react-three-fiber\";\r\n\r\nextend({PointerLockControls});\r\n\r\nconst PointerControls = (props: any) => {\r\n    const { camera, gl } = useThree();\r\n    const controls = useRef();\r\n\r\n    useEffect(() => {\r\n        document.addEventListener(\"click\", () => {\r\n                console.log(\"Lock controls!\");\r\n        });\r\n    }, [])\r\n\r\n    return (\r\n        <PointerLockControls\r\n            ref={ controls }\r\n            args={ [camera, gl.domElement] }\r\n            { ...props }\r\n        />\r\n    );\r\n}\r\n\r\nexport default PointerControls;","import { useEffect, useRef } from \"react\";\r\nimport { useFrame, useThree } from \"react-three-fiber\";\r\nimport { useSphere } from \"@react-three/cannon\";\r\nimport { Vector3 } from \"three\";\r\nimport { useKeyboardControls } from \"../../hooks/useKeyboardControls\";\r\nimport PointerControls from \"./PointerControls\";\r\n\r\nconst SPEED = 1;\r\n\r\nconst Player = ({ position, setPosition }: any) => {\r\n    const { camera } = useThree();\r\n\r\n    const {\r\n        moveForward,\r\n        moveBackward,\r\n        moveLeft,\r\n        moveRight,\r\n        jump,\r\n    } = useKeyboardControls();\r\n      \r\n    const ref = useRef(position);\r\n    //const [ref, api] = useSphere(() => ({\r\n    //    mass: 1,\r\n    //    type: \"Dynamic\",\r\n    //    position: position\r\n    //}));\r\n\r\n    //const velocity = useRef([0, 0, 0]);\r\n    //useEffect(() => {\r\n    //    api.velocity.subscribe((v) => (velocity.current = v));\r\n    //}, [api.velocity]);\r\n\r\n    useFrame(() => {\r\n            camera.position.copy(new Vector3(\r\n                //ref.current !== undefined ? ref.current.position.x : 0,\r\n                //ref.current !== undefined ? ref.current.position.y + 1 : 0,\r\n                //ref.current !== undefined ? ref.current.position.z : 0\r\n        ));\r\n\r\n        const frontVector = new Vector3(\r\n            0, 0, (moveBackward ? 1 : 0) - (moveForward ? 1 : 0),\r\n        );\r\n        const sideVector = new Vector3(\r\n            (moveLeft ? 1 : 0) - (moveRight ? 1 : 0), 0, 0,\r\n        );\r\n\r\n        const direction = new Vector3();\r\n        direction\r\n            .subVectors(frontVector, sideVector)\r\n            .normalize()\r\n            .multiplyScalar(SPEED)\r\n            .applyEuler(camera.rotation);\r\n        \r\n        //api.velocity.set(direction.x, velocity.current[1], direction.z);\r\n\r\n        //if (jump && (Math.abs(Number(velocity.current[1].toFixed(2))) < 0.05)) {\r\n        //    api.velocity.set(velocity.current[0], 8, velocity.current[2]);\r\n        //}\r\n    });\r\n\r\n    return (\r\n        <>\r\n            <PointerControls />\r\n            <mesh ref={ ref } />\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Player;","import grassTop from \"./../resources/textures/terrain/grass-top.png\";\r\nimport grassSide from \"./../resources/textures/terrain/grass-side.png\";\r\nimport stone from \"./../resources/textures/terrain/stone.png\";\r\n\r\ntype Map = {\r\n    [key: number]: Items\r\n}\r\ntype Items = {\r\n    [index: number]: {\r\n        name: string,\r\n        texture: string\r\n    }\r\n}\r\n\r\nconst TEXTURE_MAP: Map = {\r\n    1: [\r\n        {\r\n            name: \"grass-top\",\r\n            texture: grassTop\r\n        },\r\n        {\r\n            name: \"grass-side\",\r\n            texture: grassSide\r\n        }\r\n    ],\r\n    2: [{\r\n        name: \"stone\",\r\n        texture: stone\r\n    }]\r\n} as const;\r\n\r\nexport const getTexture = (id: number): string => {\r\n    if (id in TEXTURE_MAP) {\r\n        const map = TEXTURE_MAP[id]\r\n        return map[0].texture;\r\n    } else {\r\n        return TEXTURE_MAP[1][0].texture;\r\n    }\r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAwUExURU11KlyMMl6RMwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANHCLTwAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABVSURBVBjTHU6BDQBBDHEmuJqg7D/ku0/TRhSBjEaxYHHEBF1trpDMZuKCoygHZKmh4TxfBEk/Rj2On71nE5bpowNd0eMX6Gq2gWvzZCCqqpczbUHtB2D+DBm8ApsnAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAwUExURU8vAFs3AGA6AF5NM011KndHAFyMMl6RMwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAODW4M4AAAAJcEhZcwAADsMAAA7DAcdvqGQAAAB1SURBVBjTHcjBDcJADETRIRIFkArwRC6AdJBVYM9sBwuWfI2ildw+FnN681FHeO6FMHPz6n/sXg1mFh6eGCN6En3EUbbPju9oZym9oJ1MvAskwY1PkHqwCTHJyoUzs1AfwhtUdKJcBbyTwjWxsFHlAs0/ceYPxTshgs6zBykAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAwUExURXJycoCAgJGRkQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEiWYqkAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAA/SURBVBjTVY3REQAwBEPTDcQGzf5DthR3zY8ID7AUBldpKFWXI2nPDq1zk4RBOwZdQfO7/AyKzsQTt3rBFYU8OloH9q6yLnsAAAAASUVORK5CYII=\"","import { useRef } from \"react\";\r\nimport { NearestFilter, TextureLoader } from \"three\";\r\nimport { getTexture } from \"../../hooks/useTextureMap\";\r\n\r\ntype Props = {\r\n    position: any,\r\n    id: number\r\n}\r\n\r\nconst Block = ({ position, id }: Props) => {\r\n    const ref = useRef(null);\r\n    const texture = new TextureLoader().load(getTexture(id));\r\n    texture.magFilter = NearestFilter;\r\n    return (\r\n        <mesh ref={ ref } position={ position } receiveShadow>\r\n            <boxBufferGeometry attach=\"geometry\" args={ [1, 1, 1] } />\r\n            <meshStandardMaterial attach=\"material\" color=\"white\" map={ texture } />\r\n        </mesh>\r\n    );\r\n}\r\n\r\nexport default Block;","import React from \"react\";\r\nimport { Vector3 } from \"three\";\r\nimport Block from \"./Block\";\r\n\r\n\r\nconst Terrain = () => {\r\n    const blocklist = []\r\n\r\n    for (let blockX = -2; blockX < 2; blockX++) {\r\n        for (let blockZ = -2; blockZ < 2; blockZ++) {\r\n            blocklist.push(<Block position={ new Vector3(blockX, -1, blockZ) } id={ 1 } key={ blockX * blockZ * Math.random() + Math.random() * 20 } />);\r\n        }\r\n    }\r\n    console.log(blocklist);\r\n\r\n    return (\r\n        <>\r\n            { blocklist }\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Terrain;","import React, { useState } from \"react\";\nimport { Canvas } from \"react-three-fiber\";\nimport { Sky } from \"@react-three/drei\";\nimport { Vector3 } from \"three\";\nimport Player from \"./components/player/Player\";\nimport Terrain from \"./components/terrain/Terrain\";\nimport { FPSStats } from \"fps-react\";\n\nimport styles from \"./App.module.scss\";\n\nfunction App() {\n  const [playerPos, setPlayerPos] = useState(new Vector3(0, 10, 0));\n  const [devEnabled, setDevEnabled] = useState(true);\n\n  return (\n    <>\n      { devEnabled ? <div id={ styles.dev }>\n        <FPSStats />\n      </div> : null }\n      <div id={ styles.app }>\n        <Canvas colorManagement>\n          <Sky sunPosition={ [100, 20, 100] } />\n          <pointLight castShadow intensity={ 0.7 } position={ [100, 100, 100] } />\n          <ambientLight intensity={ .3 } />\n          <Terrain />\n          <Player position={ playerPos } setPosition={ setPlayerPos } />\n        </Canvas>\n      </div>\n    </>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);"],"sourceRoot":""}