(this["webpackJsonpblock-game"]=this["webpackJsonpblock-game"]||[]).push([[0],{14:function(e,n,t){e.exports={options:"Options_options__1_QKv",off:"Options_off__2ANuc",on:"Options_on__259wj",disabled:"Options_disabled__tWZ0b"}},20:function(e,n,t){e.exports={manual:"Manual_manual__1qvu4"}},38:function(e,n,t){"use strict";t.r(n);var a,i,o,r,s=t(2),c=t.n(s),l=t(18),d=t.n(l),p=t(8),u=t.n(p),h=t(11),j=t(7),g=t(19),f=t(9),m=t.n(f),b=t(6),v=t(5),x=[],O=[],w=!1,y=0;function z(e){var n=e.x,t=e.z,a=e.width,i=e.depth,o=e.direction,r=_({x:n,y:1*x.length,z:t,width:a,depth:i,falls:!1});r.direction=o,x.push(r)}function _(e){var n=e.x,t=e.y,a=e.z,r=e.width,s=e.depth,c=e.falls,l=new v.b(r,1,s),d=new v.c("hsl(".concat(30+4*x.length,", 100%, 50%)")),p=new v.f({color:d}),u=new v.e(l,p);u.position.set(n,t,a),i.add(u);var h=new b.Box(new b.Vec3(r/2,.5,s/2)),j=c?5:0,g=new b.Body({mass:j,shape:h});g.position.set(n,t,a),o.addBody(g);return{threejs:u,cannonjs:g,width:r,depth:s,direction:"x"}}function k(){var e=.15;y=x.length-1;var n=x[x.length-1];n.threejs.position[n.direction]+=e,n.cannonjs.position[n.direction]+=e,function(){var e=document.querySelector("#count");e&&(e.innerHTML=y.toString())}(),a.position.y<1*(x.length-2)+4&&(a.position.y+=e),o.step(1/60),O.forEach((function(e){e.threejs.position.copy(e.cannonjs.position),e.threejs.quaternion.copy(e.cannonjs.quaternion)})),r.render(i,a)}function S(){if(w){var e=x[x.length-1],n=x[x.length-2],t=e.direction,a=e.threejs.position[t]-n.threejs.position[t],i=Math.abs(a),o="x"==t?e.width:e.depth,s=o-i;if(s>0){var c=function(e){var n=e.topLayer,t=e.overlap,a=e.size,i=e.delta,o=n.direction,r="x"==o?t:n.width,s="z"==o?t:n.depth;n.width=r,n.depth=s,n.threejs.scale[o]=t/a,n.threejs.position[o]-=i/2,n.cannonjs.position[o]-=i/2;var c=new b.Box(new b.Vec3(r/2,.5,s/2));return n.cannonjs.shapes=[],n.cannonjs.addShape(c),{newWidth:r,newDepth:s}}({topLayer:e,overlap:s,size:o,delta:a}),l=c.newWidth,d=c.newDepth,p=(s/2+i/2)*Math.sign(a);!function(e){var n=e.x,t=e.z,a=e.width,i=e.depth,o=_({x:n,y:1*(x.length-1),z:t,width:a,depth:i,falls:!0});O.push(o)}({x:"x"==t?e.threejs.position.x+p:e.threejs.position.x,z:"z"==t?e.threejs.position.z+p:e.threejs.position.z,width:"x"==t?i:l,depth:"z"==t?i:d}),z({x:"x"==t?e.threejs.position.x:-10,z:"z"==t?e.threejs.position.z:-10,width:l,depth:d,direction:"x"==t?"z":"x"})}else!function(){r.setAnimationLoop(null),window.removeEventListener("click",(function(){return S()}));var e=document.querySelector("#gm-count");e&&(e.innerHTML=y.toString());var n=document.getElementById("gameOverScreen");n&&n.style&&(n.style.display="flex")}()}else r.setAnimationLoop(k),w=!0}var E=function(){(o=new b.World).gravity.set(0,-10,0),o.broadphase=new b.NaiveBroadphase,o.solver.iterations=40,i=new v.h,z({x:0,z:0,width:3,depth:3,direction:""}),z({x:-10,z:0,width:3,depth:3,direction:"x"});var e=new v.a(16777215,.6);i.add(e);var n=new v.d(16777215,.6);n.position.set(10,20,0),i.add(n),(a=function(){var e=10+window.innerHeight/window.innerWidth;return new v.g(-5,5,e/2,e/-2,1,100)}()).position.set(4,4,4),a.lookAt(0,0,0),(r=new v.i({antialias:!0,alpha:!0})).setSize(window.innerWidth,window.innerHeight),r.render(i,a);var t=document.getElementById("root");t&&t.appendChild(r.domElement),window.addEventListener("click",(function(){return S()})),window.addEventListener("keyup",(function(e){switch(e.code){case"Space":case"Enter":S();break;default:console.log(e.code)}}))},N=t(39),C=t(20),I=t.n(C),A=t(0),L=function(){var e=Object(N.a)().t;return Object(A.jsxs)("div",{className:I.a.manual,children:[Object(A.jsxs)("p",{children:[Object(A.jsx)("kbd",{children:Object(A.jsx)("i",{className:"fas fa-mouse"})}),", ",Object(A.jsx)("kbd",{children:"Space"})," ",e("manual.placing.or")," ",Object(A.jsx)("kbd",{children:"Enter"})," ",e("manual.placing.part2")]}),Object(A.jsxs)("p",{children:[Object(A.jsx)("kbd",{children:"R"})," ",e("manual.refresh")]})]})},B=t(1),M=t(17),q=t(14),P=t.n(q),D=function(e){var n=e.options,t=e.setOptions,a=Object(s.useState)(!1),i=Object(j.a)(a,2),o=i[0],r=i[1],c=Object(N.a)().t;function l(e){t(Object(M.a)(Object(M.a)({},n),{},Object(B.a)({},e,!n[e])))}return Object(A.jsxs)("div",{className:P.a.options,children:[Object(A.jsx)("h2",{onClick:function(e){return r(!o)},style:o?{border:"2px solid transparent"}:{border:"2px solid white"},children:c("gameover.settings")}),o?Object.keys(n).map((function(e){return Object(A.jsxs)("p",{children:[Object(A.jsxs)("b",{children:[c("gameover.options.".concat(e)),":"]})," ",n[e]?Object(A.jsx)("span",{className:P.a.on,onClick:function(n){return l(e)},children:Object(A.jsx)("i",{className:"far fa-check-square"})}):Object(A.jsx)("span",{className:P.a.off,onClick:function(n){return l(e)},children:Object(A.jsx)("i",{className:"far fa-square"})})]},e)})):null]})},W=function(){var e="little-block-game.options",n=Object(s.useState)({dev:!1,manual:!1}),t=Object(j.a)(n,2),a=t[0],i=t[1],o=Object(N.a)().t;function r(){window.location.reload()}function c(){var n,t;n=e,t=a,localStorage.setItem(n,JSON.stringify(t))}function l(){var n,t=(n=e,null===localStorage.getItem(n)?(localStorage.setItem(n,JSON.stringify({})),{failed:!0}):JSON.parse(localStorage.getItem(n)||"{}"));return t.failed?(c(),a):t}return Object(s.useEffect)((function(){(function(){var e=Object(h.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(l());case 2:E();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(s.useEffect)((function(){c()}),[a]),window.addEventListener("keyup",(function(e){"KeyR"==e.code&&r()})),Object(A.jsxs)(A.Fragment,{children:[a.dev?Object(A.jsx)("div",{id:m.a.dev,children:Object(A.jsx)(g.a,{})}):null,Object(A.jsxs)("div",{id:m.a.app,children:[Object(A.jsx)("div",{id:"count",className:m.a.count,children:"0"}),Object(A.jsxs)("div",{id:"gameOverScreen",className:m.a.gameOver,children:[Object(A.jsx)("h1",{children:"Game Over!"}),Object(A.jsxs)("h2",{children:[o("gameover.reachedPoints.part1"),Object(A.jsx)("span",{id:"gm-count",children:"0"}),o("gameover.reachedPoints.part2")]}),Object(A.jsx)("button",{onClick:function(e){return r()},children:o("gameover.again")}),Object(A.jsx)(D,{options:a,setOptions:i})]})]}),a.manual?Object(A.jsx)("div",{id:m.a.manual,children:Object(A.jsx)(L,{})}):null]})},F=t(26),H=t(10),J=t(25);F.a.use(J.a).use(H.e).init({fallbackLng:"en",keySeparator:".",ns:["translation"],defaultNS:"translation",debug:!1,resources:{en:{translation:{gameover:{reachedPoints:{part1:"You reached ",part2:" Points!"},again:"Try again!",settings:"Settings",options:{dev:"Debug",manual:"Manual",english:"English",faceCon:"Facecam Control"}},manual:{placing:{or:"or",part2:"to place a block",face:"or just open your mouth!"},refresh:"to try again or reload the page"}}},de:{translation:{gameover:{reachedPoints:{part1:"Du hast ",part2:" Punkte erreicht!"},again:"Versuche es noch einmal!",settings:"Einstellungen",options:{dev:"Debug",manual:"Anleitung",english:"Englisch",faceCon:"Facecam Steuerung"}},manual:{placing:{or:"oder",part2:"um einen Block zu platzieren",face:"oder \xf6ffne einfach deinen Mund!"},refresh:"um es noch einmal zu versuchen oder die Seite neu zu laden"}}},es:{translation:{gameover:{reachedPoints:{part1:"Alcanzaste ",part2:" puntos!"},again:"Intentar otra vez!",settings:"Ajustes",options:{dev:"Depurar",manual:"El Manual",english:"Ingles",faceCon:"Facecam controlar"}},manual:{placing:{or:"o",part2:"colocar un bloque",face:"o simplemente abre la boca!"},refresh:"para volver a intentarlo o actualizar la pagina"}}},it:{translation:{gameover:{reachedPoints:{part1:"Hai raggiunto ",part2:" punti!"},again:"Riprova!",settings:"Impostazioni",options:{dev:"Debug",manual:"Il manuale",english:"Inglese",faceCon:"Facecam controllo"}},manual:{placing:{or:"o",part2:"per posizionare un blocco",face:"o semplicemente apri la bocca!"},refresh:"per riprovare o aggiornare la pagina"}}}}}),d.a.render(Object(A.jsx)(c.a.StrictMode,{children:Object(A.jsx)(W,{})}),document.getElementById("root"))},9:function(e,n,t){e.exports={root:"App_root__2CSG3",app:"App_app__2ziFi",count:"App_count__32WNx",gameOver:"App_gameOver__3iCsK"}}},[[38,1,2]]]);
//# sourceMappingURL=main.3768b696.chunk.js.map