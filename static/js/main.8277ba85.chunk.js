(this["webpackJsonpblock-game"]=this["webpackJsonpblock-game"]||[]).push([[0],{17:function(e,n,t){"use strict";t.r(n);var i,o,r,s,d=t(0),a=t.n(d),c=t(9),h=t.n(c),p=t(5),l=t(10),u=t(4),w=t.n(u),j=t(3),v=t(2),x=[],g=[],f=!1,m=0;function b(e){var n=e.x,t=e.z,i=e.width,o=e.depth,r=e.direction,s=y({x:n,y:1*x.length,z:t,width:i,depth:o,falls:!1});s.direction=r,x.push(s)}function y(e){var n=e.x,t=e.y,i=e.z,s=e.width,d=e.depth,a=e.falls,c=new v.b(s,1,d),h=new v.c("hsl(".concat(30+4*x.length,", 100%, 50%)")),p=new v.f({color:h}),l=new v.e(c,p);l.position.set(n,t,i),o.add(l);var u=new j.Box(new j.Vec3(s/2,.5,d/2)),w=a?5:0,g=new j.Body({mass:w,shape:u});g.position.set(n,t,i),r.addBody(g);return{threejs:l,cannonjs:g,width:s,depth:d,direction:"x"}}function z(){var e=.15;m=x.length-1;var n=x[x.length-1];n.threejs.position[n.direction]+=e,n.cannonjs.position[n.direction]+=e,function(){var e=document.querySelector("#count");e&&(e.innerHTML=m.toString())}(),i.position.y<1*(x.length-2)+4&&(i.position.y+=e),r.step(1/60),g.forEach((function(e){e.threejs.position.copy(e.cannonjs.position),e.threejs.quaternion.copy(e.cannonjs.quaternion)})),s.render(o,i)}function O(){if(f){var e=x[x.length-1],n=x[x.length-2],t=e.direction,i=e.threejs.position[t]-n.threejs.position[t],o=Math.abs(i),r="x"==t?e.width:e.depth,d=r-o;if(d>0){var a=function(e){var n=e.topLayer,t=e.overlap,i=e.size,o=e.delta,r=n.direction,s="x"==r?t:n.width,d="z"==r?t:n.depth;n.width=s,n.depth=d,n.threejs.scale[r]=t/i,n.threejs.position[r]-=o/2,n.cannonjs.position[r]-=o/2;var a=new j.Box(new j.Vec3(s/2,.5,d/2));return n.cannonjs.shapes=[],n.cannonjs.addShape(a),{newWidth:s,newDepth:d}}({topLayer:e,overlap:d,size:r,delta:i}),c=a.newWidth,h=a.newDepth,p=(d/2+o/2)*Math.sign(i);!function(e){var n=e.x,t=e.z,i=e.width,o=e.depth,r=y({x:n,y:1*(x.length-1),z:t,width:i,depth:o,falls:!0});g.push(r)}({x:"x"==t?e.threejs.position.x+p:e.threejs.position.x,z:"z"==t?e.threejs.position.z+p:e.threejs.position.z,width:"x"==t?o:c,depth:"z"==t?o:h}),b({x:"x"==t?e.threejs.position.x:-10,z:"z"==t?e.threejs.position.z:-10,width:c,depth:h,direction:"x"==t?"z":"x"})}else!function(){s.setAnimationLoop(null),window.removeEventListener("click",(function(){return O()}));var e=document.querySelector("#gm-count");e&&(e.innerHTML=m.toString());var n=document.getElementById("gameOverScreen");n&&n.style&&(n.style.display="flex")}()}else s.setAnimationLoop(z),f=!0}var _=function(){(r=new j.World).gravity.set(0,-10,0),r.broadphase=new j.NaiveBroadphase,r.solver.iterations=40,o=new v.h,b({x:0,z:0,width:3,depth:3,direction:""}),b({x:-10,z:0,width:3,depth:3,direction:"x"});var e=new v.a(16777215,.6);o.add(e);var n=new v.d(16777215,.6);n.position.set(10,20,0),o.add(n),(i=function(){var e=10+window.innerHeight/window.innerWidth;return new v.g(-5,5,e/2,e/-2,1,100)}()).position.set(4,4,4),i.lookAt(0,0,0),(s=new v.i({antialias:!0})).setSize(window.innerWidth,window.innerHeight),s.render(o,i);var t=document.getElementById("root");t&&t.appendChild(s.domElement),window.addEventListener("click",(function(){return O()}))},S=t(1),k=function(){var e=Object(d.useState)(!1),n=Object(p.a)(e,2),t=n[0];n[1];return Object(d.useEffect)((function(){_()}),[]),Object(S.jsxs)(S.Fragment,{children:[t?Object(S.jsx)("div",{id:w.a.dev,children:Object(S.jsx)(l.a,{})}):null,Object(S.jsxs)("div",{id:w.a.app,children:[Object(S.jsx)("div",{id:"count",className:w.a.count,children:"0"}),Object(S.jsxs)("div",{id:"gameOverScreen",className:w.a.gameOver,children:[Object(S.jsx)("h1",{children:"Game Over!"}),Object(S.jsxs)("h2",{children:["You reached ",Object(S.jsx)("span",{id:"gm-count",children:"0"})," Points!"]}),Object(S.jsx)("button",{onClick:function(e){window.location.reload()},children:"Try again!"})]})]})]})};h.a.render(Object(S.jsx)(a.a.StrictMode,{children:Object(S.jsx)(k,{})}),document.getElementById("root"))},4:function(e,n,t){e.exports={root:"App_root__2CSG3",app:"App_app__2ziFi",count:"App_count__32WNx",gameOver:"App_gameOver__3iCsK"}}},[[17,1,2]]]);
//# sourceMappingURL=main.8277ba85.chunk.js.map